#pragma once
#include <stdint.h>
#include <vector>

//====================================================================================
// Forward Declare
//====================================================================================
class NetMessage;
class NetConnection;

//====================================================================================
// Type Defs + Defines
//====================================================================================


//====================================================================================
// ENUMS
//====================================================================================


//====================================================================================
// Structs
//====================================================================================


//====================================================================================
// Classes
//====================================================================================
class NetMessageChannel
{  
public:
	NetMessageChannel() {}
	NetMessageChannel( NetConnection& owningConnection );
	~NetMessageChannel();

	void HandleMessage( NetMessage& messageToHandle );
	void ProcessMessage( NetMessage& messageToHandle );
	void CheckListForMessagesToProcess();

	uint16_t GetAndIncrementSequenceID();

public:
	uint16_t								m_nextSentSequenceID = 0U;            // used for sending
	
	uint16_t								m_nextExpectedSequenceID = 0U;        // used for receiving
	std::vector<NetMessage*>				m_outOfOrderMessages;				  // used for receiving

private:
	NetConnection*							m_owningConnection = nullptr;
};

//====================================================================================
// Standalone C Functions
//====================================================================================


//====================================================================================
// Externs
//====================================================================================


//====================================================================================
// Written by Zachary Bracken : [11/3/2018]
//====================================================================================